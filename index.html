<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Journal de Pluie</title>
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Pro:wght@300;400;600&family=Karla:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Journal de Pluie</h1>
            <p class="subtitle">Suivez la m√©t√©o au quotidien</p>
        </header>

        <!-- Section d'entr√©e -->
        <div class="card">
            <div class="date-display" id="currentDate"></div>
            <div class="input-section">
                <div class="input-group">
                    <input type="number" id="rainfallInput" placeholder="0" min="0" step="0.1">
                    <span class="unit">mm</span>
                </div>
                <button class="btn-primary" onclick="saveRainfall()">Enregistrer</button>
            </div>

            <div class="stats">
                <div class="stat-box">
                    <div class="stat-value" id="todayValue">-</div>
                    <div class="stat-label">Aujourd'hui</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value" id="monthTotal">-</div>
                    <div class="stat-label">Ce mois</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value" id="yearTotal">-</div>
                    <div class="stat-label">Cette ann√©e</div>
                </div>
            </div>
        </div>

        <!-- Graphiques -->
        <div class="card">
            <div class="tabs">
                <button class="tab active" onclick="switchChart('month')">Ce mois</button>
                <button class="tab" onclick="switchChart('year')">Cette ann√©e</button>
            </div>
            <div class="chart-container">
                <canvas id="rainfallChart"></canvas>
            </div>
        </div>

        <!-- Historique -->
        <div class="card">
            <h2 style="font-family: 'Crimson Pro', serif; color: var(--rain-dark); margin-bottom: 15px;">Historique</h2>
            <div class="history-list" id="historyList"></div>
        </div>

        <!-- Actions d'export/import -->
        <div class="card">
            <h2 style="font-family: 'Crimson Pro', serif; color: var(--rain-dark); margin-bottom: 15px;">Sauvegarde</h2>
            <p style="color: var(--text-light); margin-bottom: 20px;">
                Pensez √† sauvegarder vos donn√©es r√©guli√®rement pour ne rien perdre en cas de changement de t√©l√©phone.
            </p>
            <div class="actions">
                <button class="btn-primary" onclick="exportData()">üì• Exporter mes donn√©es</button>
                <label for="importFile" class="file-upload-label">üì§ Importer des donn√©es</label>
                <input type="file" id="importFile" accept=".json" onchange="importData(event)">
            </div>
            <p style="margin-top: 15px; font-size: 0.9rem; color: var(--text-light); text-align: center;">
                Derni√®re sauvegarde : <span id="lastBackup">Jamais</span>
            </p>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/charts.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
